<html>

<head>
    <link rel="stylesheet" href="style.css">
    <!-- <script src="https://assets.cors-examples.tomgregory.com/time.js" type="text/javascript"></script> -->
    <title>Cross-origin request from &lt;script&gt; tag</title>
    <script src="https://code.jquery.com/jquery-3.6.1.min.js"
        integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
    <script src="stuff.js"></script>
    <script>
        registerDynamicContent(function () {
            const javscriptURL = "https://assets.cors-examples.tomgregory.com/time.js";
            const javscript = $("<script>", {
                src: javscriptURL,
                type: "text/javascript",
                onload: function () {
                    $("#dynamic").hide().fadeIn('slow');
                    finishDynamicContent(new URL(javscriptURL).origin);
                }
            });

            javscript.appendTo("head");
        });
    </script>
</head>

<body>
    <div class="content">
        <h1>Cross-origin request from <code>&lt;script&gt;</code> tag</h1>
        <p>Using an <code>&lt;script&gt;</code> tag triggers a request for the script, in this case cross-origin.</p>

        <div class="dynamic" id="dynamic">
            <button type="button" id="try-it-out" class="big centred">
                Try it out!
            </button>
            <div id="time" class="highlight">What's the time?</div>
        </div>

        <div class="info-box hidden" id="origins">
            <div class="info-title">Origins</div>
            <div>
                Source: <code id="source-origin"></code>
            </div>
            <div>
                Request: <code id="request-origin"></code>
            </div>
        </div>

        <div>
            <a href="link-tag-cross-origin.html">
                <button type="button" class="blue">
                    <small><<</small> Previous example
                </button>
            </a>
        </div>
    </div>
</body>

</html>